#!/usr/bin/env python2.6
"""
Controller for various ports operations
"""
from port import ports
from queue import ports_queue, config_queue, install_queue #, fetch_queue
from target import config_builder, install_builder # , fetch_builder
import make

from logging import getLogger, StreamHandler, DEBUG

handler = StreamHandler()
handler.setLevel(DEBUG)
getLogger('pypkg').addHandler(StreamHandler())
#getLogger('pypkg').setLevel(DEBUG)
#getLogger('pypkg.port').setLevel(DEBUG)
getLogger('pypkg.port.DependHandler').setLevel(DEBUG)


make.pre_cmd = ['echo']

print "Getting 'x11/xorg' port details..."
xorg = ports['x11/xorg']
print "\nWaiting for all port details to load..."
ports_queue.join()
print "\nConfiguring 'x11/xorg'..."
config_builder(xorg)
config_queue.join()

#print "\nFetching all for 'x11/xorg'..."
#fetch_builder(xorg, recurse=True)
#fetch_queue.join()

print "\nInstalling all for 'x11/xorg'..."
install_builder(xorg)
install_queue.join()

exit(0)
